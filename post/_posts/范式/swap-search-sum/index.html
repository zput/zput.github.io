<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>编程范式-泛型编程 - Zput's blog</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="zput"><meta name=description content="评估编程语言的抽象能力手段"><meta name=keywords content="Hugo,theme,even"><meta name=generator content="Hugo 0.110.0 with theme even"><link rel=canonical href=http://zput.github.io/post/_posts/%E8%8C%83%E5%BC%8F/swap-search-sum/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.fdb1035139209ff03fa34c28400ff54f04900828b7cafe0d2cfb1f48b70a2ffd.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="编程范式-泛型编程"><meta property="og:description" content="评估编程语言的抽象能力手段"><meta property="og:type" content="article"><meta property="og:url" content="http://zput.github.io/post/_posts/%E8%8C%83%E5%BC%8F/swap-search-sum/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-10-20T21:00:00+00:00"><meta property="article:modified_time" content="2022-10-20T21:00:00+00:00"><meta itemprop=name content="编程范式-泛型编程"><meta itemprop=description content="评估编程语言的抽象能力手段"><meta itemprop=datePublished content="2022-10-20T21:00:00+00:00"><meta itemprop=dateModified content="2022-10-20T21:00:00+00:00"><meta itemprop=wordCount content="3065"><meta itemprop=keywords content="范式,"><meta name=twitter:card content="summary"><meta name=twitter:title content="编程范式-泛型编程"><meta name=twitter:description content="评估编程语言的抽象能力手段"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Zput</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/go-goroutine><li class=mobile-menu-item>go源码专栏</li></a><a href=/post/mrmk/><li class=mobile-menu-item>中间件专栏</li></a><a href=/post/cloud_native/><li class=mobile-menu-item>云原生专栏</li></a><a href=/post/postgraduate/><li class=mobile-menu-item>考研专栏</li></a><a href=/post/><li class=mobile-menu-item>时间线</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Zput</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/go-goroutine>go源码专栏</a></li><li class=menu-item><a class=menu-item-link href=/post/mrmk/>中间件专栏</a></li><li class=menu-item><a class=menu-item-link href=/post/cloud_native/>云原生专栏</a></li><li class=menu-item><a class=menu-item-link href=/post/postgraduate/>考研专栏</a></li><li class=menu-item><a class=menu-item-link href=/post/>时间线</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>编程范式-泛型编程</h1><div class=post-meta><span class=post-time>2022-10-20</span><div class=post-category><a href=/categories/%E8%8C%83%E5%BC%8F/>范式</a></div></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#类型抽象数据结构抽象业务与控制逻辑的分离>类型抽象&数据结构抽象&业务与控制逻辑的分离</a><ul><li><a href=#评估方式>评估方式</a><ul><li><a href=#c语言>C语言</a></li><li><a href=#c语言-1>C++语言</a></li><li><a href=#golang>golang</a></li><li><a href=#php>php</a></li></ul></li></ul></li></ul></nav></div></div><div class=article-container><div class=post-content><h1 id=类型抽象数据结构抽象业务与控制逻辑的分离>类型抽象&数据结构抽象&业务与控制逻辑的分离</h1><ul><li>类型抽象：对于静态类型有不同的类型。</li><li>数据结构：是数据的聚合形式，比如基础的数组，链表，然后在此延伸出的队列，栈，散列表，堆，树和图。<ul><li>类型相当于元素（element）,数据结构是多个元素的组织形式。</li></ul></li><li>算法的抽象。<ul><li>程序的算法（成应用逻辑）</li><li>应该是和数据类型甚至数据结构无关的。</li><li>各种特殊的数据类型（或数据结构）</li><li>理应做好自己的份内的工作。</li><li>算法只关于一个完全标准和通用的实现。</li><li>对于泛型的抽象，我们需要回答一个问题：<ul><li>如果让我的数据类型符合通用的算法，那么什么是数据类型最小的需求？</li></ul></li></ul></li></ul><h2 id=评估方式>评估方式</h2><p>通过让不同的编程语言来写出swap/search/sum三种函数，来评估此语言的类型抽象,数据结构抽象和控制逻辑的抽象能力</p><ul><li>Swap(X,y)通用的与类型无关的泛型<ul><li>类型抽象</li></ul></li><li>Search(container,va)泛型函数<ul><li>类型的抽像</li><li>数据结构的抽像</li></ul></li><li>Sum-Employee.vacation/Emplyee.Salary<ul><li>业务逻辑与控制逻辑的分离</li><li>控制逻辑的抽象和泛型</li></ul></li></ul><h3 id=c语言>C语言</h3><h4 id=swap>swap</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;memory.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;assert.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=o>*</span><span class=n>t</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>swap</span><span class=p>(</span><span class=kt>void</span><span class=o>*</span> <span class=n>t1</span><span class=p>,</span><span class=kt>void</span><span class=o>*</span> <span class=n>t2</span><span class=p>,</span><span class=kt>int</span> <span class=n>size</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=n>t</span> <span class=o>=</span> <span class=p>(</span><span class=kt>void</span><span class=o>*</span><span class=p>)</span><span class=nf>malloc</span><span class=p>(</span><span class=n>size</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>assert</span><span class=p>(</span><span class=n>t</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>memcpy</span><span class=p>(</span><span class=n>t</span><span class=p>,</span><span class=n>t1</span><span class=p>,</span><span class=n>size</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>    <span class=nf>memcpy</span><span class=p>(</span><span class=n>t1</span><span class=p>,</span><span class=n>t2</span><span class=p>,</span><span class=n>size</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>memcpy</span><span class=p>(</span><span class=n>t2</span><span class=p>,</span><span class=n>t</span><span class=p>,</span><span class=n>size</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span><span class=kt>char</span> <span class=o>*</span><span class=n>argv</span><span class=p>[]){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>i1</span> <span class=o>=</span><span class=mi>4</span><span class=p>,</span> <span class=n>i2</span><span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>i1</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>i2</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>i1</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;i1:%d, i2:%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>i1</span><span class=p>,</span> <span class=n>i2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>c1</span><span class=o>=</span><span class=sc>&#39;A&#39;</span><span class=p>,</span> <span class=n>c2</span><span class=o>=</span><span class=sc>&#39;Z&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>swap</span><span class=p>(</span><span class=o>&amp;</span><span class=n>c1</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>c2</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>c1</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;c1:%c, c2:%c</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>c1</span><span class=p>,</span> <span class=n>c2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nf>free</span><span class=p>(</span><span class=n>t</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>执行：https://onlinegdb.com/1SPNbkCSPr</li></ul><h4 id=search>search</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;memory.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;assert.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=c1>//任意类型的查找，elemsize指定单个元素的大小
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>search</span><span class=p>(</span><span class=kt>void</span><span class=o>*</span> <span class=n>sour</span><span class=p>,</span> <span class=kt>void</span><span class=o>*</span> <span class=n>targetElem</span><span class=p>,</span> <span class=kt>size_t</span> <span class=n>sourLen</span><span class=p>,</span> <span class=kt>size_t</span> <span class=n>elemsize</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>assert</span><span class=p>(</span><span class=n>sour</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=kt>void</span><span class=o>*</span> <span class=n>elemTemp</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>sourLen</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>elemTemp</span> <span class=o>=</span><span class=p>(</span><span class=kt>char</span><span class=o>*</span><span class=p>)(</span><span class=n>sour</span><span class=p>)</span><span class=o>+</span><span class=n>i</span><span class=o>*</span><span class=n>elemsize</span><span class=p>;</span><span class=c1>//获取第i个元素
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=k>if</span> <span class=p>(</span><span class=nf>memcmp</span><span class=p>(</span><span class=n>elemTemp</span><span class=p>,</span> <span class=n>targetElem</span><span class=p>,</span><span class=n>elemsize</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//自定义比较函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>searchByCmp</span><span class=p>(</span><span class=kt>void</span><span class=o>*</span> <span class=n>sour</span><span class=p>,</span> <span class=kt>void</span><span class=o>*</span> <span class=n>targetElem</span><span class=p>,</span> <span class=kt>size_t</span> <span class=n>sourLen</span><span class=p>,</span> <span class=kt>size_t</span> <span class=n>elemsize</span><span class=p>,</span> <span class=kt>int</span> <span class=p>(</span><span class=o>*</span><span class=n>cmpfun</span><span class=p>)(</span><span class=kt>void</span><span class=o>*</span><span class=p>,</span> <span class=kt>void</span><span class=o>*</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>assert</span><span class=p>(</span><span class=n>sour</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=kt>void</span><span class=o>*</span> <span class=n>elemTemp</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>sourLen</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=n>elemTemp</span> <span class=o>=</span> <span class=p>(</span><span class=kt>char</span><span class=o>*</span><span class=p>)</span><span class=n>sour</span><span class=o>+</span><span class=n>i</span><span class=o>*</span><span class=n>elemsize</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=p>(</span><span class=nf>cmpfun</span><span class=p>(</span><span class=n>elemTemp</span><span class=p>,</span> <span class=n>targetElem</span><span class=p>)</span><span class=o>==</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>cmpFunForStr</span><span class=p>(</span><span class=kt>void</span><span class=o>*</span> <span class=n>vp1</span><span class=p>,</span> <span class=kt>void</span><span class=o>*</span> <span class=n>vp2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>char</span><span class=o>*</span> <span class=n>s1</span> <span class=o>=</span> <span class=o>*</span><span class=p>((</span><span class=kt>char</span><span class=o>**</span><span class=p>)</span><span class=n>vp1</span><span class=p>);</span><span class=c1>//这里获取值而非地址
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kt>char</span><span class=o>*</span> <span class=n>s2</span> <span class=o>=</span> <span class=o>*</span><span class=p>((</span><span class=kt>char</span><span class=o>**</span><span class=p>)</span><span class=n>vp2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;s1:%s, s2:%s</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>s1</span><span class=p>,</span> <span class=n>s2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nf>strcmp</span><span class=p>(</span><span class=n>s1</span><span class=p>,</span><span class=n>s2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span><span class=kt>char</span> <span class=o>*</span><span class=n>argv</span><span class=p>[]){</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>intArray</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>intTarget</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>assert</span><span class=p>(</span><span class=nf>search</span><span class=p>(</span><span class=n>intArray</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>intTarget</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>intTarget</span><span class=p>))</span> <span class=o>==</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;success for int</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>doubleArray</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=mf>1000.0</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>,</span> <span class=mf>3.4</span><span class=p>,</span> <span class=mf>7.0</span><span class=p>,</span> <span class=mf>50.0</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>doubleTarget</span> <span class=o>=</span> <span class=mf>2.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>assert</span><span class=p>(</span><span class=nf>search</span><span class=p>(</span><span class=n>doubleArray</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>doubleTarget</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>doubleTarget</span><span class=p>))</span> <span class=o>==</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;success for double</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>char</span><span class=o>*</span> <span class=n>strArray</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=s>&#34;hello&#34;</span><span class=p>,</span> <span class=s>&#34;world&#34;</span><span class=p>,</span> <span class=s>&#34;2023&#34;</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span><span class=o>*</span> <span class=n>strTarget</span> <span class=o>=</span> <span class=s>&#34;world&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nf>assert</span><span class=p>(</span><span class=nf>searchByCmp</span><span class=p>(</span><span class=n>strArray</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>strTarget</span><span class=p>,</span> <span class=mi>3</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span> <span class=o>*</span><span class=p>),</span> <span class=n>cmpFunForStr</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;end</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><a href=https://onlinegdb.com/SGnFZeqx3>https://onlinegdb.com/SGnFZeqx3</a></li></ul><blockquote><p>Do not use memcmp() to compare security critical data, such as cryptographic secrets, because the required CPU time depends on the number of equal bytes. Instead, a function that performs comparisons in constant time is required. Some operating systems provide such a function (e.g., NetBSD&rsquo;s consttime_memequal()), but no such function is specified in POSIX. On Linux, it may be necessary to implement such a function oneself.</p></blockquote><h5 id=c语言泛型的问题>C语言泛型的问题</h5><ul><li><p>没有办法解决数据结构的抽象。</p><ul><li>如果再继续进入数据结构中的泛型。如：vector,stack,map几乎很难了</li><li>数据容器还需要解决两个问题：<ul><li>数据对象的内存是如何分配和释放的？</li><li>数据对象的复制是如何复制的？深拷贝还是浅拷贝？</li></ul></li></ul></li><li><p>算法越复杂，对于类型的抽象越难满足。</p><ul><li>随着算法越来越复杂，<strong>接口</strong>越来越复杂。<ul><li>数据类型的自适应问题</li></ul></li></ul></li></ul><h3 id=c语言-1>C++语言</h3><h4 id=c有效地解决了程序的泛型问题>C++有效地解决了程序的泛型问题</h4><ul><li>类的出现<ul><li>构造函数、析构函数一定义了数据模型的内存分配和释放。</li><li>拷贝函数函数、赋值函数一定义了数据模型中数据的拷贝和赋值。</li><li>重载操作符一定义了数据模型中数据的操作是如何进行的</li></ul></li><li>模板的出现<ul><li>根据<strong>不同的类型</strong>直接生成<strong>不同类型</strong>的函数，对不同的类型进行了有效的隔离。</li><li>具化的模板和<strong>特定的重载函数</strong>，可以为特定的类型指定<strong>特定的操作</strong>。</li></ul></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;vector&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;list&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>testVector</span> <span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>testList</span> <span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span> <span class=k>class</span> <span class=nc>InputIterator</span><span class=p>,</span> <span class=k>class</span> <span class=nc>T</span> <span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=n>T</span> <span class=n>sum</span> <span class=p>(</span><span class=n>InputIterator</span> <span class=n>first</span><span class=p>,</span> <span class=n>InputIterator</span> <span class=n>last</span><span class=p>,</span> <span class=n>T</span> <span class=n>start</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>while</span> <span class=p>(</span><span class=n>first</span> <span class=o>!=</span> <span class=n>last</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>start</span> <span class=o>+=</span> <span class=o>*</span><span class=n>first</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>start</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=nf>main</span> <span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>testVector</span> <span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>testList</span> <span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span>
</span></span><span class=line><span class=cl><span class=nf>testVector</span> <span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>vector</span> <span class=o>&lt;</span> <span class=kt>int</span> <span class=o>&gt;</span><span class=n>v</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>v</span><span class=p>.</span><span class=n>push_back</span> <span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>v</span><span class=p>.</span><span class=n>push_back</span> <span class=p>(</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>v</span><span class=p>.</span><span class=n>push_back</span> <span class=p>(</span><span class=mi>3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>v</span><span class=p>.</span><span class=n>push_back</span> <span class=p>(</span><span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Sum of Vector v is : &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>sum</span> <span class=p>(</span><span class=n>v</span><span class=p>.</span><span class=n>begin</span> <span class=p>(),</span> <span class=n>v</span><span class=p>.</span><span class=n>end</span> <span class=p>(),</span> <span class=mi>0</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span>
</span></span><span class=line><span class=cl><span class=nf>testList</span> <span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>//for list 
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>list</span> <span class=o>&lt;</span> <span class=kt>double</span> <span class=o>&gt;</span><span class=n>l</span><span class=p>;</span>		<span class=c1>//creat a double type list
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>l</span><span class=p>.</span><span class=n>push_back</span> <span class=p>(</span><span class=mi>10</span><span class=p>);</span>		<span class=c1>//pushing data into list l
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>l</span><span class=p>.</span><span class=n>push_front</span> <span class=p>(</span><span class=mi>11</span><span class=p>);</span>		<span class=c1>//pushing data into list l
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>l</span><span class=p>.</span><span class=n>push_back</span> <span class=p>(</span><span class=mi>9</span><span class=p>);</span>		<span class=c1>//pushing data into list l
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>l</span><span class=p>.</span><span class=n>push_front</span> <span class=p>(</span><span class=mi>12</span><span class=p>);</span>		<span class=c1>//pushing data into list l
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>l</span><span class=p>.</span><span class=n>push_back</span> <span class=p>(</span><span class=mi>8</span><span class=p>);</span>		<span class=c1>//pushing data into list l
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=c1>// list&lt;double&gt;::iterator itlist;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>  <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Sum of List L is : &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>sum</span> <span class=p>(</span><span class=n>l</span><span class=p>.</span><span class=n>begin</span> <span class=p>(),</span> <span class=n>l</span><span class=p>.</span><span class=n>end</span> <span class=p>(),</span> <span class=mf>0.0</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><a href=https://onlinegdb.com/NqSDCn8Xk>https://onlinegdb.com/NqSDCn8Xk</a></li></ul><h5 id=sum>sum</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c++ data-lang=c++><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;vector&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>cout</span><span class=p>;</span> <span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>vector</span><span class=p>;</span> <span class=k>using</span> <span class=n>std</span><span class=o>::</span><span class=n>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Employee</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span> <span class=n>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>string</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>vacation</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>salary</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//total salary or total vacation days?
</span></span></span><span class=line><span class=cl><span class=c1>//sum(staff.begin(),staff.end(),0);
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>class</span> <span class=nc>Iter</span><span class=p>,</span><span class=k>class</span> <span class=nc>T</span><span class=p>,</span><span class=k>class</span> <span class=nc>Op</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=n>T</span> <span class=n>reduce</span> <span class=p>(</span><span class=n>Iter</span> <span class=n>start</span><span class=p>,</span><span class=n>Iter</span> <span class=n>end</span><span class=p>,</span><span class=n>T</span> <span class=n>init</span><span class=p>,</span><span class=n>Op</span> <span class=n>op</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=n>T</span> <span class=n>result</span> <span class=o>=</span> <span class=n>init</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>start</span> <span class=o>!=</span> <span class=n>end</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=o>=</span> <span class=n>op</span><span class=p>(</span><span class=n>result</span><span class=p>,</span><span class=o>*</span><span class=n>start</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>start</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>result</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=n>vector</span><span class=o>&lt;</span><span class=n>Employee</span><span class=o>&gt;</span><span class=n>staff</span> <span class=o>=</span> <span class=p>{{</span><span class=s>&#34;t&#34;</span><span class=p>,</span> <span class=s>&#34;121221&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=s>&#34;s&#34;</span><span class=p>,</span> <span class=s>&#34;121221&#34;</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>sum_salries</span> <span class=o>=</span> <span class=n>reduce</span><span class=p>(</span><span class=n>staff</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=n>staff</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=mf>0.0</span><span class=p>,</span> <span class=p>[](</span><span class=kt>double</span> <span class=n>s</span><span class=p>,</span><span class=n>Employee</span> <span class=n>e</span><span class=p>){</span><span class=k>return</span> <span class=n>s</span><span class=o>+</span><span class=n>e</span><span class=p>.</span><span class=n>salary</span><span class=p>;});</span>
</span></span><span class=line><span class=cl>    <span class=kt>double</span> <span class=n>max_salary</span> <span class=o>=</span> <span class=n>reduce</span><span class=p>(</span><span class=n>staff</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span><span class=n>staff</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span><span class=mf>0.0</span><span class=p>,</span> <span class=p>[](</span><span class=kt>double</span> <span class=n>s</span><span class=p>,</span><span class=n>Employee</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span><span class=k>return</span> <span class=n>s</span> <span class=o>&gt;</span> <span class=n>e</span><span class=p>.</span><span class=n>salary</span><span class=o>?</span><span class=nl>s</span><span class=p>:</span><span class=n>e</span><span class=p>.</span><span class=n>salary</span><span class=p>;</span> <span class=p>}</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Sum of sum_salries:&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>sum_salries</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s> max_salary:&#34;</span><span class=o>&lt;&lt;</span> <span class=n>max_salary</span> <span class=o>&lt;&lt;</span> <span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><a href=https://onlinegdb.com/9cJxKV9el>https://onlinegdb.com/9cJxKV9el</a></li></ul><h4 id=clambda>c++Lambda</h4><p>[capture list] (params list) mutable exception-> return type { function body }</p><ul><li><a href="https://blog.csdn.net/YGG12022/article/details/124043116?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167377331516800222885943%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=167377331516800222885943&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-124043116-null-null.142%5Ev71%5Econtrol,201%5Ev4%5Eadd_ask&utm_term=%E4%BB%BF%E5%87%BD%E6%95%B0&spm=1018.2226.3001.4187">referenece</a></li></ul><h4 id=c迭代器>c++迭代器</h4><p><img src=https://raw.githubusercontent.com/zput/myPicLib/master/zput.github.io/20230115164413.png alt=20230115164413></p><p>迭代器的种类
迭代器可以被分为5种：输入迭代器、输出迭代器、前向迭代器、双向迭代器、随机访问迭代器。下面是它们的分类依据：</p><p>输入迭代器：只能单步向前迭代元素，不允许修改由该类迭代器引用的元素。
输出迭代器：只能单步向前迭代元素，对元素只有写的权力。
前向迭代器：拥有输入迭代器和输出迭代器的所有特性
双向迭代器：在前向迭代器的基础上提供了单步向后迭代元素的能力
随机访问迭代器：拥有上面4个迭代器的所有特性，而且可以像指针那样进行算术计算，而不是仅仅只有单步向前或向后迭代。
在STL中，各容器提供的迭代器种类如下：</p><p>vector，deque：随机访问迭代器
list，set，multiset，map，multimap：双向迭代器
stack，queue，priority_queue：不支持任何迭代器</p><p>各种迭代器支持的操作如下：</p><p><img src=https://raw.githubusercontent.com/zput/myPicLib/master/zput.github.io/20230115164634.png alt=20230115164634></p><p>五种迭代器均支持：</p><ul><li>p++：后置单步向前迭代</li><li>++p：前置单步向前迭代</li><li>输入迭代器：<ul><li>*p：解引用作为右值（读）</li><li>p=p1：将一个迭代器赋给另一个迭代器</li><li>p==p1：比较迭代器的相等性</li><li>p!=p1：比较迭代器的不等性</li></ul></li><li>输出迭代器：<ul><li>*p：解引用作为左值（写）</li><li>p=p1：将一个迭代器赋给另一个迭代器</li></ul></li><li>前向迭代器：<ul><li>输入迭代器和输出迭代器的所有支持操作的总和</li></ul></li><li>双向迭代器：<ul><li>p&ndash;：后置单步向后迭代</li><li>&ndash;p：前置单步向后迭代</li></ul></li><li>随机访问迭代器：<ul><li>p+=i/p+i：i步向前迭代</li><li>p-=i/p-i：i步向后迭代</li><li>p[i]：返回偏离i位元素的引用</li><li>p&lt;p1 & p&lt;=p1 & p>p1 & p>=p1：比较两个迭代器的先后顺序位置</li></ul></li></ul><h3 id=golang>golang</h3><h4 id=sum-1>sum</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Number</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=p>|</span> <span class=kt>int64</span> <span class=p>|</span> <span class=kt>float64</span> <span class=p>|</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nx>Sum</span><span class=p>[</span><span class=nx>T</span> <span class=nx>Number</span><span class=p>](</span><span class=nx>numbers</span> <span class=p>[]</span><span class=nx>T</span><span class=p>)</span> <span class=nx>T</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>total</span> <span class=nx>T</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>x</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>numbers</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>total</span> <span class=o>+=</span> <span class=nx>x</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>total</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>testInt</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nf>testStr</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>testInt</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>xs</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>int</span><span class=p>{</span><span class=mi>3</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>10</span><span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>total</span> <span class=o>:=</span> <span class=nf>Sum</span><span class=p>(</span><span class=nx>xs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>total</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>testStr</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>xs</span> <span class=o>:=</span> <span class=p>[]</span><span class=kt>string</span><span class=p>{</span><span class=s>&#34;3&#34;</span><span class=p>,</span> <span class=s>&#34;-&#34;</span><span class=p>,</span> <span class=s>&#34;5&#34;</span><span class=p>,</span> <span class=s>&#34;-&#34;</span><span class=p>,</span> <span class=s>&#34;10&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>total</span> <span class=o>:=</span> <span class=nf>Sum</span><span class=p>(</span><span class=nx>xs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;%s&#34;</span><span class=p>,</span> <span class=nx>total</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><a href=https://go.dev/play/p/uwtXoqETqWT>https://go.dev/play/p/uwtXoqETqWT</a></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Iterator[T] represents an iterator yielding elements of type T.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Iterator</span><span class=p>[</span><span class=nx>T</span> <span class=nx>any</span><span class=p>]</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// Next yields a new value from the Iterator.
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nf>Next</span><span class=p>()</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ---------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>sliceIter</span><span class=p>[</span><span class=nx>T</span> <span class=nx>any</span><span class=p>]</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>slice</span> <span class=p>[]</span><span class=nx>T</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Slice returns an Iterator that yields elements from a slice.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nx>Slice</span><span class=p>[</span><span class=nx>T</span> <span class=nx>any</span><span class=p>](</span><span class=nx>slice</span> <span class=p>[]</span><span class=nx>T</span><span class=p>)</span> <span class=nx>Iterator</span><span class=p>[</span><span class=nx>T</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>sliceIter</span><span class=p>[</span><span class=nx>T</span><span class=p>]{</span>
</span></span><span class=line><span class=cl>		<span class=nx>slice</span><span class=p>:</span> <span class=nx>slice</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>it</span> <span class=o>*</span><span class=nx>sliceIter</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span> <span class=nf>Next</span><span class=p>()</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>it</span><span class=p>.</span><span class=nx>slice</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>None</span><span class=p>[</span><span class=nx>T</span><span class=p>]()</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>first</span> <span class=o>:=</span> <span class=nx>it</span><span class=p>.</span><span class=nx>slice</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>	<span class=nx>it</span><span class=p>.</span><span class=nx>slice</span> <span class=p>=</span> <span class=nx>it</span><span class=p>.</span><span class=nx>slice</span><span class=p>[</span><span class=mi>1</span><span class=p>:]</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>Some</span><span class=p>[</span><span class=nx>T</span><span class=p>](</span><span class=nx>first</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ---------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>mapIter</span><span class=p>[</span><span class=nx>T</span><span class=p>,</span> <span class=nx>R</span> <span class=nx>any</span><span class=p>]</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>inner</span> <span class=nx>Iterator</span><span class=p>[</span><span class=nx>T</span><span class=p>]</span>
</span></span><span class=line><span class=cl>	<span class=nx>fn</span>    <span class=kd>func</span><span class=p>(</span><span class=nx>T</span><span class=p>)</span> <span class=nx>R</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Map is an Iterator adapter that transforms each value yielded by the
</span></span></span><span class=line><span class=cl><span class=c1>// underlying iterator using fn.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nx>Map</span><span class=p>[</span><span class=nx>T</span><span class=p>,</span> <span class=nx>R</span> <span class=nx>any</span><span class=p>](</span><span class=nx>it</span> <span class=nx>Iterator</span><span class=p>[</span><span class=nx>T</span><span class=p>],</span> <span class=nx>fn</span> <span class=kd>func</span><span class=p>(</span><span class=nx>T</span><span class=p>)</span> <span class=nx>R</span><span class=p>)</span> <span class=nx>Iterator</span><span class=p>[</span><span class=nx>R</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>&amp;</span><span class=nx>mapIter</span><span class=p>[</span><span class=nx>T</span><span class=p>,</span> <span class=nx>R</span><span class=p>]{</span>
</span></span><span class=line><span class=cl>		<span class=nx>inner</span><span class=p>:</span> <span class=nx>it</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>fn</span><span class=p>:</span>    <span class=nx>fn</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>it</span> <span class=o>*</span><span class=nx>mapIter</span><span class=p>[</span><span class=nx>T</span><span class=p>,</span> <span class=nx>R</span><span class=p>])</span> <span class=nf>Next</span><span class=p>()</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>R</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nf>MapOption</span><span class=p>(</span><span class=nx>it</span><span class=p>.</span><span class=nx>inner</span><span class=p>.</span><span class=nf>Next</span><span class=p>(),</span> <span class=nx>it</span><span class=p>.</span><span class=nx>fn</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ----------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// Options[T] represents an optional value of type T.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>type</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span> <span class=nx>any</span><span class=p>]</span> <span class=kd>struct</span><span class=p>{</span> <span class=nx>value</span> <span class=o>*</span><span class=nx>T</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// MapOption applies a function fn to the contained value if it exists.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nx>MapOption</span><span class=p>[</span><span class=nx>T</span> <span class=nx>any</span><span class=p>,</span> <span class=nx>R</span> <span class=nx>any</span><span class=p>](</span><span class=nx>opt</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>],</span> <span class=nx>fn</span> <span class=kd>func</span><span class=p>(</span><span class=nx>T</span><span class=p>)</span> <span class=nx>R</span><span class=p>)</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>R</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>!</span><span class=nx>opt</span><span class=p>.</span><span class=nf>IsSome</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>None</span><span class=p>[</span><span class=nx>R</span><span class=p>]()</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nf>Some</span><span class=p>(</span><span class=nf>fn</span><span class=p>(</span><span class=nx>opt</span><span class=p>.</span><span class=nf>Unwrap</span><span class=p>()))</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Some returns an Option containing a value.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nx>Some</span><span class=p>[</span><span class=nx>T</span> <span class=nx>any</span><span class=p>](</span><span class=nx>v</span> <span class=nx>T</span><span class=p>)</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>]{</span><span class=nx>value</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>v</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// None returns an empty Option.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nx>None</span><span class=p>[</span><span class=nx>T</span> <span class=nx>any</span><span class=p>]()</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>]{</span><span class=nx>value</span><span class=p>:</span> <span class=kc>nil</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// IsNone returns true if Option is empty.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>opt</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span> <span class=nf>IsNone</span><span class=p>()</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>opt</span><span class=p>.</span><span class=nx>value</span> <span class=o>==</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// IsSome returns true if Option contains a value.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>opt</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span> <span class=nf>IsSome</span><span class=p>()</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=p>!</span><span class=nx>opt</span><span class=p>.</span><span class=nf>IsNone</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Unwrap extracts a value from Option. Panics if Option does not contain a
</span></span></span><span class=line><span class=cl><span class=c1>// value.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>opt</span> <span class=nx>Option</span><span class=p>[</span><span class=nx>T</span><span class=p>])</span> <span class=nf>Unwrap</span><span class=p>()</span> <span class=nx>T</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>opt</span><span class=p>.</span><span class=nf>IsNone</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nb>panic</span><span class=p>(</span><span class=s>&#34;Attempted to unwrap an empty Option.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=o>*</span><span class=nx>opt</span><span class=p>.</span><span class=nx>value</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>testSlice</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>testSlice</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>it</span> <span class=o>:=</span> <span class=nf>Slice</span><span class=p>([]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>})</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>v</span> <span class=o>:=</span> <span class=nx>it</span><span class=p>.</span><span class=nf>Next</span><span class=p>();</span> <span class=p>!</span><span class=nx>v</span><span class=p>.</span><span class=nf>IsNone</span><span class=p>();</span> <span class=nx>v</span> <span class=p>=</span> <span class=nx>it</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>.</span><span class=nf>Unwrap</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>testMap</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>it</span> <span class=o>:=</span><span class=nf>Map</span><span class=p>([]</span><span class=kt>int</span><span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>})</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>v</span> <span class=o>:=</span> <span class=nx>it</span><span class=p>.</span><span class=nf>Next</span><span class=p>();</span> <span class=p>!</span><span class=nx>v</span><span class=p>.</span><span class=nf>IsNone</span><span class=p>();</span> <span class=nx>v</span> <span class=p>=</span> <span class=nx>it</span><span class=p>.</span><span class=nf>Next</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>v</span><span class=p>.</span><span class=nf>Unwrap</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><a href=https://go.dev/play/p/IM2tTB_iAeU>https://go.dev/play/p/IM2tTB_iAeU</a></li></ul><h3 id=php>php</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>add</span><span class=p>(</span><span class=nv>$a</span><span class=p>,</span> <span class=nv>$b</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>add</span><span class=p>(</span><span class=s1>&#39;1&#39;</span><span class=p>,</span> <span class=s1>&#39;2&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>add</span><span class=p>([],</span> <span class=k>true</span><span class=p>);</span> <span class=c1>// ?
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>add</span><span class=p>(</span><span class=nv>$a</span><span class=p>,</span> <span class=nv>$b</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>is_int</span><span class=p>(</span><span class=nv>$a</span><span class=p>)</span> <span class=o>||</span> <span class=o>!</span><span class=nx>is_int</span><span class=p>(</span><span class=nv>$b</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>// 内置类型提示 
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>function</span> <span class=nf>add</span><span class=p>(</span><span class=nx>int</span> <span class=nv>$a</span><span class=p>,</span> <span class=nx>int</span> <span class=nv>$b</span><span class=p>)</span><span class=o>:</span> <span class=nx>int</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nv>$a</span> <span class=o>+</span> <span class=nv>$b</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>Collection</span> <span class=k>extends</span> <span class=nx>ArrayObject</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>offsetGet</span><span class=p>(</span><span class=nx>mixed</span> <span class=nv>$key</span><span class=p>)</span><span class=o>:</span> <span class=nx>mixed</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>filter</span><span class=p>(</span><span class=nx>Closure</span> <span class=nv>$fn</span><span class=p>)</span><span class=o>:</span> <span class=nx>self</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>map</span><span class=p>(</span><span class=nx>Closure</span> <span class=nv>$fn</span><span class=p>)</span><span class=o>:</span> <span class=nx>self</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>StringCollection</span> <span class=k>extends</span> <span class=nx>Collection</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>offsetGet</span><span class=p>(</span><span class=nx>mixed</span> <span class=nv>$key</span><span class=p>)</span><span class=o>:</span> <span class=nx>string</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>UserCollection</span> <span class=k>extends</span> <span class=nx>Collection</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>offsetGet</span><span class=p>(</span><span class=nx>mixed</span> <span class=nv>$key</span><span class=p>)</span><span class=o>:</span> <span class=nx>User</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=k>class</span> <span class=nc>Collection</span><span class=o>&lt;</span><span class=nx>Type</span><span class=o>&gt;</span> <span class=k>extends</span> <span class=nx>ArrayObject</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=nf>offsetGet</span><span class=p>(</span><span class=nx>mixed</span> <span class=nv>$key</span><span class=p>)</span><span class=o>:</span> <span class=nx>Type</span> 
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=cm>/* … */</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// …
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$users</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Collection</span><span class=o>&lt;</span><span class=nx>User</span><span class=o>&gt;</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nv>$slugs</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Collection</span><span class=o>&lt;</span><span class=nx>string</span><span class=o>&gt;</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><a href=https://stitcher.io/blog/generics-in-php-3>php generic discuss</a></li></ul></div></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>zput</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2022-10-20</span></p></div><footer class=post-footer><div class=post-tags><a href=/tags/%E8%8C%83%E5%BC%8F/>范式</a></div><nav class=post-nav><a class=prev href=/post/_posts/%E6%A6%82%E5%BF%B5%E5%8E%9F%E7%90%86%E7%9A%84%E6%80%9D%E8%80%83/invocation_relation/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">调用关系</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/post/_posts/work/aliyun_transcode_video/><span class="next-text nav-default">利用阿里云进行转码</span>
<span class="next-text nav-mobile">下一篇</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><script src=https://giscus.app/client.js data-repo=zput/utterances-comments data-repo-id=R_kgDOHhATGQ data-category=Announcements data-category-id=DIC_kwDOHhATGc4CPxca data-mapping=pathname data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=light data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:wkzxc@sina.com class="iconfont icon-email" title=email></a>
<a href=https://github.com/zput class="iconfont icon-github" title=github></a>
<a href=http://zput.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=copyright-year>&copy;
2017 -
2023<span class=heart><i class="iconfont icon-heart"></i></span><span>zput</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script>
<script type=text/javascript>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script async src=https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin=anonymous></script></body></html>